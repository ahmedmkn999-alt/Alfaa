<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الفيديوهات | FULL MARK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="auth.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #020617; color: white; font-family: 'Tajawal', sans-serif; padding-bottom: 50px; }
        .bg-glow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(circle at 50% -10%, #1e1b4b, #020617 80%); }
        
        .header-sticky {
            position: sticky; top: 0; z-index: 50;
            background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(25px);
            padding: 20px; border-bottom: 1px solid rgba(99, 102, 241, 0.2);
            margin-bottom: 25px;
        }

        /* كارت الفيديو المطور */
        .video-item {
            background: rgba(30, 41, 59, 0.3); 
            padding: 18px; border-radius: 22px; margin-bottom: 15px;
            display: flex; align-items: center; gap: 15px; cursor: pointer;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .video-item:hover {
            transform: scale(1.02);
            background: rgba(30, 41, 59, 0.6);
            border-color: #6366f1;
            box-shadow: 0 15px 30px -10px rgba(99, 102, 241, 0.2);
        }
        
        .play-icon-box {
            width: 50px; height: 50px; border-radius: 16px;
            display: flex; align-items: center; justify-content: center; 
            font-size: 1rem; transition: 0.3s;
        }
        .video-item:hover .play-icon-box {
            transform: rotate(10deg);
        }

        /* فئات الألوان الخاصة بـ FULL MARK */
        .color-group-1 { border-right: 5px solid #6366f1; } 
        .color-group-1 .play-icon-box { background: rgba(99, 102, 241, 0.15); color: #818cf8; }

        .color-group-2 { border-right: 5px solid #d946ef; } 
        .color-group-2 .play-icon-box { background: rgba(217, 70, 239, 0.15); color: #f472b6; }

        .color-group-3 { border-right: 5px solid #10b981; } 
        .color-group-3 .play-icon-box { background: rgba(16, 185, 129, 0.15); color: #34d399; }

        .branding-footer {
            text-align: center; margin-top: 50px; opacity: 0.4; font-size: 0.75rem; 
            letter-spacing: 4px; font-weight: 900; color: #6366f1;
        }
    </style>
</head>
<body>
    <div class="bg-glow"></div>

    <div id="app">
        <div class="header-sticky flex items-center justify-between">
            <div class="flex items-center gap-4 max-w-[80%]">
                <button onclick="history.back()" class="w-12 h-12 bg-white/5 border border-white/10 rounded-2xl text-white flex items-center justify-center hover:bg-white/10 transition-all">
                    <i class="fas fa-arrow-right"></i>
                </button>
                <div class="truncate">
                    <h1 class="text-xl font-black text-indigo-100 truncate">{{ title }}</h1>
                    <p class="text-[10px] text-indigo-400 font-bold uppercase tracking-widest mt-0.5">LECTURE PARTS • أجزاء المحاضرة</p>
                </div>
            </div>
            <div class="hidden md:block text-xs font-black text-white/20 uppercase tracking-tighter">
                Full Mark
            </div>
        </div>

        <div class="px-5 max-w-3xl mx-auto">
            <div v-if="videos.length > 0">
                <div v-for="(v, i) in videos" @click="play(v)" 
                     :class="['video-item', 'color-group-' + ((i % 3) + 1)]">
                    
                    <div class="flex flex-col items-center justify-center bg-white/5 w-10 h-10 rounded-xl border border-white/5">
                        <span class="text-indigo-300 font-black text-xs leading-none">{{ i + 1 }}</span>
                        <span class="text-[8px] opacity-40 uppercase font-bold mt-1">Part</span>
                    </div>
                    
                    <div class="flex-1">
                        <div class="text-sm md:text-base font-bold text-white group-hover:text-indigo-400 transition-colors">
                            {{ v.video_name || v.title || v.name }}
                        </div>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="text-[9px] bg-indigo-500/10 text-indigo-400 px-2 py-0.5 rounded-full font-bold">VIDEO</span>
                            <span class="text-[10px] text-gray-500">جودة عالية HD</span>
                        </div>
                    </div>
                    
                    <div class="play-icon-box shadow-lg"><i class="fas fa-play"></i></div>
                </div>
            </div>

            <div v-else class="text-center mt-32">
                <div class="w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-film text-3xl opacity-20 text-indigo-500"></i>
                </div>
                <p class="text-gray-500 font-bold">عفواً، لا توجد فيديوهات في هذا القسم حالياً.</p>
            </div>

            <div class="branding-footer">
                DEVELOPED BY ELGIZAWY
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;

        createApp({
            setup() {
                const videos = ref([]);
                const title = ref('');

                const play = (v) => {
                    localStorage.setItem('currentVideo', JSON.stringify(v));
                    window.location.href = 'player.html';
                };

                onMounted(() => {
                    checkAuth();
                    const vids = JSON.parse(localStorage.getItem('selectedLectureVids') || '[]');
                    const lectureTitle = localStorage.getItem('selectedLectureTitle') || 'المحتوى التعليمي';
                    videos.value = vids;
                    title.value = lectureTitle;
                });

                return { videos, title, play };
            }
        }).mount('#app');
    </script>
</body>
</html>
